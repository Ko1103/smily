<!doctype html>
<html>
<head>
  <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://skyway.io/dist/0.3/peer.min.js"></script>
  <script src="https://skyway.io/dist/multiparty.min.js"></script>
  <style> video { width:200px; } </style>
  <script>
    // MultiParty インスタンスを生成
    multiparty = new MultiParty( {
      "key": "9b2c396e-3697-4de3-ba34-74136223be99"  /* SkyWay keyを指定 */
    });

    multiparty.on('my_ms', function(video) {
      // 自分のvideoを表示
      var vNode = MultiParty.util.createVideoNode(video);
      $(vNode).appendTo("#streams");
    }).on('peer_ms', function(video) {
      // peerのvideoを表示
      var vNode = MultiParty.util.createVideoNode(video);
      $(vNode).appendTo("#streams");
    }).on('ms_close', function(peer_id) {
      // peerが切れたら、対象のvideoノードを削除する
      $("#"+peer_id).remove();
    });
    // サーバとpeerに接続
    multiparty.start()

  </script>
</head>
<body>
  <img src="http://192.168.100.102:8000/?action=stream"/>
  <div id="streams"></div>
</body>
</html>
